<div class="home">
  <%# 左サイド %>
  <div class='home__left-side'>
    <%# 投稿ボタン %>
    <%= link_to new_tweet_path do %>
      <button>投稿する</button>
    <% end %>
    <%# コメント作成 %>
    <%= form_with(model:[@tweet, @new_comment], local: true) do |f| %>
      <%= f.text_area :text, placeholder: 'コメントを書く', class: 'comment__new' %>
      <%= f.submit '送信する' %>
    <% end %>
  </div>

  <%# メイン部分 %>
  <div class='home__main'>

    <%# サイトURLをAPIに送信する用 %>
    <input id=<%='site_url_js' + @tweet.id.to_s %> type='hidden' value=<%= @tweet.site.url %> >

    <%# タイムライン記事 %>
    <div class='tweet-show__box'>
      <div class='tweet-show__row1'>
        <div class='tweet-show__row1-col1'>
          <%# アイコン %>
          <%= attachment_image_tag @tweet.user, :image, fallback: "user_default.png",class: 'tweet-show__user-icon' %>
          <%# ユーザー名 %>
          <span class='tweet-show__user-name'>
            <%= @tweet.user.name %>
          </span>
        </div>
        <%# 投稿日時 %>
        <div class='tweet-show__tweeted-time'>
          <small><%= @tweet.created_at_ja %></small>
        </div>
      </div>
      <div class='tweet-show__row2'>
        <div class='tweet-show__row2-col1'>
          <%# サイト画像 %>
          <img id=<%="myimage_js" + @tweet.id.to_s %> src="" class='tweet-show__site-image'>
          <%# TODO:タグ %>
        </div>
        <div class='tweet-show__row2-col2'>
          <%# ページタイトル %>
          <div id=<%='mytitle_js' + @tweet.id.to_s %> class='tweet-show__page-title' ></div>
          <%# ページURL %>
          <div class='tweet-show__page-url'><%= @tweet.site.url %></div>
          <%# 紹介文 %>
          <div class='tweet-show__tweet-text'><%= @tweet.text %></div>
        </div>
      </div>
      <div class='tweet-show__row3'>
        <%# いいね %>
        <div class='tweet-show__tweet-item'>
          <%= link_to '', class: 'tweet-show__link-show' do %>
            <i class="far fa-thumbs-up"> いいね</i>
          <% end %>
        </div>
        <%# 自分の投稿の場合のみの機能 %>
        <% if current_user.id == @tweet.user_id %>
          <%# 編集 %>
          <div class='tweet-show__tweet-item'>
            <%= link_to edit_tweet_path(@tweet.id), class: 'tweet-show__link-show' do %>
              <i class="far fa-edit"> 編集</i>
            <% end %>
          </div>
          <div class='tweet-show__tweet-item'>
            <%= link_to tweet_path(@tweet.id), method: :delete, class: 'tweet-show__link-show', "data-confirm" => "本当に削除しますか？" do %>
              <i class="far fa-trash-alt"> 削除</i>
            <% end %>
          </div>
        <% end %>
      </div>
      <%# コメント一覧 %>
      <% @tweet.comments.each do |comment| %>
        <div class= 'comment__list' >
          <%= comment.user.name %>
          <%= comment.text %>
          <%= comment.created_at_ja %>
        </div>
      <% end %>
    </div>
  </div>

  <%# 右サイド %>
  <div class='home__right-side'>
  </div>
</div>

<%# タイムライン内でサイトのプレビューを表示 %>
<%= javascript_include_tag 'preview.js' %>
